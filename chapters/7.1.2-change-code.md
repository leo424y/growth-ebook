如何修改遺留程式碼
---

> 即使是最訓練有素的開發團隊，也不能保證始終編寫出清晰高效的程式碼。

然而，如果我們不去嘗試做一些改變，這些程式碼就會遺留下去——成為遺留程式碼，再次重構掉。即使說，重構系統是不可避免的一個過程，但是在這個過程中要是能抽象中領域特定的程式碼、語言也是件不錯的事。

###修改遺留程式碼

So，如何開始修改程式碼？如《修改程式碼的藝術》一書所說，應該是下面的五個步驟：

1. 程式碼修改點
2. 找到測試點
3. 打破依賴
4. 編寫測試
5. 修改並重構

在有測試的情況下重構現有的程式碼才是安全的。而這些測試用例也是功能的體現，功能首先要得到保證了，然後才能保證一切都可以正常。不過，我更喜歡以下面三點概括他們：

 - 守: 找到測試點。守，即保證原有的功能是正確的。在這基礎上，我們需要新增測試
 - 破: 打破依賴。會導致遺留程式碼的一個原因還有，原有程式碼的耦合度比較高。因此，我們需要去打破這些耦合，重新構建依賴。
 - 離: 修改並重構。

不過，我想你只要有前面的那些步驟。你為什麼還需要看這一章的內容呢？

參考書籍：

 - **《修改程式碼的藝術》**
 - **《持續交付指南：修改程式碼的9條最佳實踐》**
