架構模式
---

> 模式就是最好的架構。

####架構的產生

在剛開始接觸架構設計的時候，我買了幾本書然後就開始學習了。我發現在這些書中都出現了一些相似的東西，如基本的分層設計、Pipe and Filters 模式、MVC 模式。然後，我開始意料到這些模式本身就是最好的架構。

MVC 模式本身也是基於分層而設計的，如下圖是 Spring MVC 的請求處理過程：

![Spring MVC](assets/article/chapter8/spring-mvc.png)

而這只是框架本身的架構，這一類也是我們預先設計好的框架。

在框架之上，我們會有自己本身的業務所帶來的模式。如下圖是我在網上搜羅到的一個簡單的傳送郵件的架構：

![傳送郵件中的 Pipe and Filters 模式](assets/article/chapter8/basic-paf.png)

這樣的模式則是在業務發展的過程中演進出來的。

###預設計式架構

日常使用的框架多數是預先設計的構架，因為這些架構本身的目標是明確的。系統會圍繞一定的架構去構建，並且在這個過程中架構會幫助我們更好地理解系統。如下圖所示的是 Emacs 的架構：

![Emacs 架構](assets/article/chapter8/emacs-architecture.png)

它採用的是互動式應用程式設計師應用廣泛的模型-檢視-控制器模式。

無論是瀑布式開發——設計好系統的框架，然後對系統的每個部分進行獨立的完善和設計，最後系統再整合到一起。還是敏捷式開發——先做出 MVP，再一步步完善。它們都需要一定的預先式設計，只是傳統的開發模式讓兩者看上去是等同的。

在過去由於 IT 技術變革小，新技術產生的速率也比較低，預先設計系統的架構是一種很不錯的選擇。然而，技術的發展趨勢是越來越快，現有的設計往往在很短的一段時間裡就需要推倒重來。

###演進式架構：擁抱變化

演進式架構則是我們日常工作的業務程式碼庫演進出來的。由於業務本身在不斷髮展，我們不斷地演進系統的架構。在這樣的模式下產生的架構系統會更加穩定，也更加優美。僅僅依賴於事先的設計，而不考慮架構在後期業務中的變化是一種不可取的設計模式。

這不併意味著不採用預先式設計，而是不一味去依靠原先系統的架構。
