後臺即服務
---

> BaaS（Backend as a Service）是一種新型的雲服務，旨在為移動和 Web 應用提供後端雲服務，包括雲端資料/檔案儲存、賬戶管理、訊息推送、社交媒體整合等。

產生這種服務的主要原因之一是因為移動應用的流行。在移動應用中，我們實際上只需要一個 API 介面來連線資料庫，並作一些相應的業務邏輯處理。對於不同的應用產商來說，他們打造 API 的方式可能稍有不同，然而他們都只是將後臺作為一個服務。

在一些更特殊的例子裡，即有網頁版和移動應用端，他們也開始使用同一個 API。前端作為一個單頁面的應用，或者有後臺渲染的應用。其架構如下圖所示：

![Backend As A Service](assets/article/chapter2/baas-diagram.png)

###API 演進史

在早期的工作中，我們會將大量的業務邏輯放置到 View 層——如迭代出某個結果。

而在今天，當我們有大量的邏輯一致時，我們怎麼辦，重複實現三次？

如下所示是筆者之前重構的系統的一個架構縮圖：

![重複邏輯的系統架構](assets/article/chapter2/duplicate-business-logic.png)

上面系統產生的主要原因是：技術本身的演進所造成的，並非是系統在一開始沒有考慮到這個問題。

![API 演進史](assets/article/chapter2/api-history.png)

從早期到現在的網際網路公司都有這樣的問題，也會有同樣的過程：

第一階段： 因為創始人對於某個領域的看好，他們就建立了這樣的一個桌面網站。這個時間點，大概可以在2000年左右。

第二階段： 前“智慧手機”出現了，人們需要開發移動版本的網站來適用使用者的需要。由於當時的開發環境，以及技術條件所限，網站只會是桌面模板的簡化。這時還沒有普及 Ajax 請求、SPA 這些事物。

第三階段： 手機應用的製作開始流行起來了。由於需要製作手機應用，人們就需要在網站上建立 API。由於當時的業務或者項目需求，這個 API 是直接耦合在系統中的。

第四階段： 由於手機效能的不斷提高，並且行動網路速度不斷提升，人們便開始在手機上製作單頁面應用。

由於他們使用的是相同業務邏輯、程式碼邏輯相同而**技術棧不同**的程式碼，當有一個新的需求出現時，他們需要重複多次實現，如下圖所示：

![重複業務邏輯的系統架構](assets/article/chapter2/duplicate-business-logic-with-domain.png)

隨後——也就是今天，各種新的解決方案出現了，如 React、混合應用、原生 + Web 的混合式應用、他們的目的就是解決上述的問題。不過，這些解決方案只是為了解決在前端中可能出現的問題，詳細的內容可以見《前端演進史》。

而人們也藉此機會在統一後臺——因為我們可以藉助於混合應用或混合式應用（即原生 + 內嵌 WebView，可以同時解決效能和跨平臺問題）統一移動端，藉助於響應式設計的理念可以統一桌面、平板和手機端。

因此，我們需要的就只是這樣的一個 API：

![One API](assets/article/chapter2/one-api.png)

###後臺即服務

現在，讓我們來看看一個採用後臺即服務的網站架構會是怎樣的？
